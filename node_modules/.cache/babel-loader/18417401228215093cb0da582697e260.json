{"ast":null,"code":"var _jsxFileName = \"/home/learn/Desktop/ShoutRandomly/frontend/src/components/MyShouts.js\";\nimport React from 'react';\nimport NavBar from './NavBar';\nimport Findfollow from './Findfollow';\nimport Shout from './Shout';\nimport Card from '@material-ui/core/Card';\nimport CardContent from '@material-ui/core/CardContent';\nimport Typography from '@material-ui/core/Typography';\nimport Grid from '@material-ui/core/Grid';\nimport dayjs from 'dayjs';\nimport relativeTime from 'dayjs/plugin/relativeTime';\nimport IconButton from '@material-ui/core/IconButton';\nimport { Delete, Edit } from '@material-ui/icons';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport TextField from '@material-ui/core/TextField';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Button from '@material-ui/core/Button';\nconst styles = {\n  card: {\n    // display: 'flex',\n    marginTop: 20,\n    marginBottom: 20,\n    position: 'relative',\n    top: 50 // marginRight: 20\n\n  },\n  content: {\n    padding: 25,\n    objectFit: 'cover'\n  },\n  button: {// float: 'right',\n  }\n};\n\nclass MyShouts extends React.Component {\n  constructor() {\n    super();\n\n    this.deleteShout = id => {\n      const token = localStorage.getItem('token');\n      const deleteObj = {\n        method: 'DELETE',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`\n        }\n      };\n      fetch(`http://localhost:3000/shouts/${id}`, deleteObj).then(resp => resp.json()).then(data => {\n        this.setState({\n          shouts: data.shouts,\n          comments: data.comments\n        });\n      });\n    };\n\n    this.editShout = id => {\n      this.setState(prevState => ({\n        setOpen: !prevState.setOpen,\n        open: !prevState.open,\n        dialogType: 'shout',\n        shout: {\n          shoutId: id\n        }\n      }));\n    };\n\n    this.handleSubmit = () => {\n      const token = localStorage.getItem('token');\n      const {\n        shoutId,\n        shoutBody\n      } = this.state.shout;\n      const reqObj = {\n        method: 'PATCH',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`\n        },\n        body: JSON.stringify(this.state.shout)\n      };\n      fetch(`http://localhost:3000/shouts/${shoutId}`, reqObj).then(resp => resp.json()).then(data => {\n        this.setState({\n          shouts: data.shouts,\n          comments: data.comments\n        });\n      } // console.log(data)\n      );\n      this.handleClose();\n    };\n\n    this.handleClose = () => {\n      this.setState({\n        setOpen: false,\n        open: false\n      });\n    };\n\n    this.editComment = id => {\n      this.setState(prevState => ({\n        setOpen: !prevState.setOpen,\n        open: !prevState.open,\n        dialogType: 'comment',\n        comment: {\n          commentId: id\n        }\n      }));\n    };\n\n    this.deleteComment = id => {\n      const token = localStorage.getItem('token');\n      const deleteObj = {\n        method: 'DELETE',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`\n        }\n      };\n      fetch(`http://localhost:3000/shouts/${id}`, deleteObj).then(resp => resp.json()).then(data => {\n        this.setState({\n          shouts: data.shouts,\n          comments: data.comments\n        });\n      });\n    };\n\n    this.handleForm = e => {\n      // console.log(e.target.value)\n      {\n        this.state.dialogType === 'shout' ? this.setState({ ...this.state,\n          shout: { ...this.state.shout,\n            shoutBody: e.target.value\n          }\n        }) : this.setState({ ...this.state,\n          comment: { ...this.state.comment,\n            commentBody: e.target.value\n          }\n        });\n      }\n    };\n\n    this.renderShouts = () => {\n      console.log(this.state);\n      const {\n        classes\n      } = this.props;\n      const {\n        shouts\n      } = this.state;\n      dayjs.extend(relativeTime);\n      return shouts.map(shout => /*#__PURE__*/React.createElement(Card, {\n        className: classes.card,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(CardContent, {\n        className: classes.content,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(Typography, {\n        variant: \"h5\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 22\n        }\n      }, shout.body), /*#__PURE__*/React.createElement(Typography, {\n        variant: \"body2\",\n        color: \"textSecondary\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 22\n        }\n      }, shout.likeCount, \" likes\"), /*#__PURE__*/React.createElement(Typography, {\n        variant: \"body2\",\n        color: \"textSecondary\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 25\n        }\n      }, shout.commentCount, \" comments\"), /*#__PURE__*/React.createElement(Typography, {\n        variant: \"body2\",\n        color: \"textSecondary\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 25\n        }\n      }, \"Created \", dayjs(shout.created_at).fromNow()), /*#__PURE__*/React.createElement(Typography, {\n        variant: \"body2\",\n        color: \"textSecondary\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 25\n        }\n      }, \"Last Updated \", dayjs(shout.updated_at).fromNow()), /*#__PURE__*/React.createElement(IconButton, {\n        \"aria-label\": \"like\",\n        className: classes.button,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(Delete, {\n        onClick: () => this.deleteShout(shout.id),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 29\n        }\n      })), /*#__PURE__*/React.createElement(IconButton, {\n        \"aria-label\": \"like\",\n        className: classes.button,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(Edit, {\n        onClick: () => this.editShout(shout.id),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 29\n        }\n      })))));\n    };\n\n    this.renderComments = () => {\n      console.log(this.state);\n      const {\n        classes\n      } = this.props;\n      const {\n        shouts\n      } = this.state;\n      dayjs.extend(relativeTime);\n      return this.state.comments.map(comment => /*#__PURE__*/React.createElement(Card, {\n        className: classes.card,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(CardContent, {\n        className: classes.content,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Typography, {\n        variant: \"h5\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 18\n        }\n      }, comment.body), /*#__PURE__*/React.createElement(Typography, {\n        variant: \"body2\",\n        color: \"textSecondary\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 21\n        }\n      }, \"Created \", dayjs(comment.created_at).fromNow()), /*#__PURE__*/React.createElement(Typography, {\n        variant: \"body2\",\n        color: \"textSecondary\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 21\n        }\n      }, \"Last Updated \", dayjs(comment.updated_at).fromNow()), /*#__PURE__*/React.createElement(IconButton, {\n        \"aria-label\": \"like\",\n        className: classes.button,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(Delete, {\n        onClick: () => this.deleteComment(comment.id),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 25\n        }\n      })), /*#__PURE__*/React.createElement(IconButton, {\n        \"aria-label\": \"like\",\n        className: classes.button,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(Edit, {\n        onClick: () => this.editComment(comment.id),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 25\n        }\n      })))));\n    };\n\n    this.state = {\n      shouts: [],\n      comments: [],\n      rendered: false,\n      comment: {\n        commentBody: \"\",\n        commentId: null\n      },\n      open: false,\n      setOpen: false,\n      shout: {\n        shoutBody: \"\",\n        shoutId: null\n      },\n      dialogType: \"\"\n    };\n  }\n\n  componentDidMount() {\n    const token = localStorage.getItem('token');\n    const reqObj = {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${token}`\n      }\n    };\n    fetch('http://localhost:3000/myuser', reqObj).then(resp => resp.json()).then(data => {\n      // console.log(data)\n      this.setState({\n        shouts: data.shouts,\n        comments: data.comments,\n        rendered: true\n      });\n    });\n  }\n\n  render() {\n    console.log(\"MyShouts state\", this.state);\n    return /*#__PURE__*/React.createElement(Grid, {\n      container: true,\n      spacing: 6,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Grid, {\n      item: true,\n      sm: 8,\n      xs: 12,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 16\n      }\n    }, this.state.rendered === true ? this.renderShouts() : /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 74\n      }\n    }, \"Loading...\")), /*#__PURE__*/React.createElement(Grid, {\n      item: true,\n      sm: 4,\n      xs: 12,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 16\n      }\n    }, this.state.rendered === true ? this.renderComments() : /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 72\n      }\n    }, \"Loading...\")), /*#__PURE__*/React.createElement(Dialog, {\n      open: this.state.open,\n      onClose: this.handleClose,\n      \"aria-labelledby\": \"form-dialog-title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 245,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(DialogTitle, {\n      id: \"form-dialog-title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 21\n      }\n    }, this.state.dialogType === 'shout' ? 'Edit Shout' : 'Edit Comment'), /*#__PURE__*/React.createElement(DialogContent, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 247,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(DialogContentText, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 21\n      }\n    }, this.state.dialogType === 'shout' ? 'Edit your shout here, make sure to save.' : 'Edit your comment here make sure you save'), /*#__PURE__*/React.createElement(TextField, {\n      onChange: this.handleForm,\n      autoFocus: true,\n      margin: \"dense\",\n      id: \"name\",\n      label: this.state.dialogType === 'shout' ? \"Shout Body\" : 'Comment Body',\n      fullWidth: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 251,\n        columnNumber: 29\n      }\n    })), /*#__PURE__*/React.createElement(DialogActions, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      onClick: this.handleClose,\n      color: \"primary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 260,\n        columnNumber: 21\n      }\n    }, \"Cancel\"), /*#__PURE__*/React.createElement(Button, {\n      onClick: this.handleSubmit,\n      color: \"primary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 263,\n        columnNumber: 21\n      }\n    }, \"Save\"))));\n  }\n\n}\n\nexport default withStyles(styles)(MyShouts);","map":{"version":3,"sources":["/home/learn/Desktop/ShoutRandomly/frontend/src/components/MyShouts.js"],"names":["React","NavBar","Findfollow","Shout","Card","CardContent","Typography","Grid","dayjs","relativeTime","IconButton","Delete","Edit","withStyles","TextField","Dialog","DialogActions","DialogContent","DialogContentText","DialogTitle","Button","styles","card","marginTop","marginBottom","position","top","content","padding","objectFit","button","MyShouts","Component","constructor","deleteShout","id","token","localStorage","getItem","deleteObj","method","headers","fetch","then","resp","json","data","setState","shouts","comments","editShout","prevState","setOpen","open","dialogType","shout","shoutId","handleSubmit","shoutBody","state","reqObj","body","JSON","stringify","handleClose","editComment","comment","commentId","deleteComment","handleForm","e","target","value","commentBody","renderShouts","console","log","classes","props","extend","map","likeCount","commentCount","created_at","fromNow","updated_at","renderComments","rendered","componentDidMount","render"],"mappings":"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","sourcesContent":["import React from 'react'\nimport NavBar from './NavBar'\nimport Findfollow from './Findfollow'\nimport Shout from './Shout'\nimport Card from '@material-ui/core/Card';\nimport CardContent from '@material-ui/core/CardContent'\nimport Typography  from '@material-ui/core/Typography';\nimport Grid  from '@material-ui/core/Grid';\nimport dayjs from 'dayjs'\nimport relativeTime from 'dayjs/plugin/relativeTime'\nimport IconButton from '@material-ui/core/IconButton'\nimport { Delete, Edit } from '@material-ui/icons'\nimport withStyles from '@material-ui/core/styles/withStyles'\n\nimport TextField from '@material-ui/core/TextField';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Button from '@material-ui/core/Button'\n\nconst styles = {\n    card: {\n        // display: 'flex',\n        marginTop: 20,\n        marginBottom: 20,\n        position: 'relative',\n        top: 50,\n        // marginRight: 20\n    },\n    content: {\n        padding: 25,\n        objectFit: 'cover'\n    },\n    button: {\n        // float: 'right',\n    }\n}\n\n\n\nclass MyShouts extends React.Component{\n\n    constructor(){\n        super()\n        this.state = {\n            shouts: [],\n            comments: [],\n            rendered: false,\n            comment: {\n                commentBody: \"\", commentId: null\n            },\n            open: false,\n            setOpen: false,\n            shout: {shoutBody: \"\", shoutId: null},\n            dialogType: \"\"\n        }\n    }\n\n   \n   \n    deleteShout = (id) => {\n        const token = localStorage.getItem('token')\n        const deleteObj = {\n            method: 'DELETE',\n            headers: {'Content-Type': 'application/json', 'Authorization': `Bearer ${token}`}\n        }\n\n        fetch(`http://localhost:3000/shouts/${id}`, deleteObj)\n        .then(resp => resp.json())\n        .then(data => {this.setState({shouts: data.shouts, comments: data.comments})}\n        )\n\n    }\n\n    editShout = (id) => {\n        this.setState(prevState => ({setOpen: !prevState.setOpen, open: !prevState.open, dialogType:'shout', shout: {shoutId: id}}))\n    }\n\n    handleSubmit = () => {\n        const token = localStorage.getItem('token')\n        const { shoutId, shoutBody } = this.state.shout\n        const reqObj = {\n            method: 'PATCH',\n            headers: {'Content-Type': 'application/json', 'Authorization': `Bearer ${token}`},\n            body: JSON.stringify(this.state.shout)\n        }\n\n        fetch(`http://localhost:3000/shouts/${shoutId}`, reqObj)\n        .then(resp => resp.json())\n        .then(data => {this.setState({\n            shouts: data.shouts, comments: data.comments\n        })}\n            \n            // console.log(data)\n        )\n\n        this.handleClose()\n    }\n\n\n    handleClose = () => {\n        this.setState({setOpen: false, open: false})\n    }\n\n    editComment = (id) => {\n        this.setState(prevState => ({setOpen: !prevState.setOpen, open: !prevState.open, dialogType: 'comment', comment: {commentId: id}}))\n    }\n\n    deleteComment = (id) => {\n        const token = localStorage.getItem('token')\n        const deleteObj = {\n            method: 'DELETE',\n            headers: {'Content-Type': 'application/json', 'Authorization': `Bearer ${token}`}\n        }\n\n        fetch(`http://localhost:3000/shouts/${id}`, deleteObj)\n        .then(resp => resp.json())\n        .then(data => {this.setState({shouts: data.shouts, comments: data.comments})}\n        )\n\n    }\n\n\n    \n\n    handleForm = (e) => {\n        // console.log(e.target.value)\n        { this.state.dialogType === 'shout' ? \n        this.setState({ ...this.state, shout: {...this.state.shout, shoutBody: e.target.value}}) : this.setState({ ...this.state, comment: {...this.state.comment, commentBody: e.target.value}})}\n    }\n\n    componentDidMount(){\n        const token = localStorage.getItem('token')\n            const reqObj = {\n                method: 'GET',\n                headers: {'Content-Type': 'application/json', 'Authorization': `Bearer ${token}`}\n            }\n\n            fetch('http://localhost:3000/myuser', reqObj)\n            .then(resp => resp.json())\n            .then(data => {\n                // console.log(data)\n                this.setState({\n                    shouts: data.shouts, comments: data.comments, rendered: true\n                    })\n                }    \n            )\n    }\n\n    renderShouts = () => {\n        console.log(this.state)\n        const { classes } = this.props \n        const { shouts } = this.state           \n        dayjs.extend(relativeTime)\n        \n\n        return shouts.map( shout => \n        <Card className={classes.card}> \n            <CardContent className={classes.content}> \n                        \n\n                     <Typography variant=\"h5\">\n                            {shout.body}\n                    </Typography> \n\n                     <Typography variant=\"body2\" color=\"textSecondary\">\n                            {shout.likeCount} likes\n                        </Typography>\n\n                        <Typography variant=\"body2\" color=\"textSecondary\">\n                            {shout.commentCount} comments\n                        </Typography>\n                    \n                        <Typography variant=\"body2\" color=\"textSecondary\">\n                             Created {dayjs(shout.created_at).fromNow()}\n                        </Typography>\n\n                        <Typography variant=\"body2\" color=\"textSecondary\">\n                             Last Updated {dayjs(shout.updated_at).fromNow()}\n                        </Typography>\n\n                        <IconButton aria-label=\"like\" className={classes.button}>\n                            <Delete onClick={() => this.deleteShout(shout.id)} />\n                        </IconButton>\n\n                        <IconButton aria-label=\"like\" className={classes.button}>\n                            <Edit onClick={() => this.editShout(shout.id)} />\n                        </IconButton>\n                </CardContent>\n        </Card>\n        )\n    }\n\n    renderComments = () => {\n        console.log(this.state)\n        const { classes } = this.props \n        const { shouts } = this.state           \n        dayjs.extend(relativeTime)\n\n       return this.state.comments.map( comment => \n        <Card className={classes.card}> \n        <CardContent className={classes.content}> \n                    \n\n                 <Typography variant=\"h5\">\n                        {comment.body}\n                </Typography> \n\n                    <Typography variant=\"body2\" color=\"textSecondary\">\n                         Created {dayjs(comment.created_at).fromNow()}\n                    </Typography>\n\n                    <Typography variant=\"body2\" color=\"textSecondary\">\n                         Last Updated {dayjs(comment.updated_at).fromNow()}\n                    </Typography>\n\n                    <IconButton aria-label=\"like\" className={classes.button}>\n                        <Delete onClick={() => this.deleteComment(comment.id)} />\n                    </IconButton>\n\n                    <IconButton aria-label=\"like\" className={classes.button}>\n                        <Edit onClick={() => this.editComment(comment.id)} />\n                    </IconButton>\n            </CardContent>\n    </Card>\n        )\n    }\n\n\n    render(){\n        console.log(\"MyShouts state\", this.state)\n        return(\n            <Grid container spacing={6}>\n\n               <Grid item sm={8} xs={12}>\n                   {this.state.rendered === true ? this.renderShouts() : <p>Loading...</p>}\n               </Grid>\n\n               <Grid item sm={4} xs={12}>\n               {this.state.rendered === true ? this.renderComments() : <p>Loading...</p>}\n               </Grid>\n\n                <Dialog open={this.state.open} onClose={this.handleClose} aria-labelledby=\"form-dialog-title\">\n                    <DialogTitle id=\"form-dialog-title\">{this.state.dialogType === 'shout' ?  'Edit Shout' : 'Edit Comment'}</DialogTitle>\n                    <DialogContent>\n                    <DialogContentText>\n                        {this.state.dialogType === 'shout' ?  'Edit your shout here, make sure to save.' : 'Edit your comment here make sure you save'}\n                    </DialogContentText>\n                            <TextField onChange = {this.handleForm}\n                                autoFocus\n                                margin=\"dense\"\n                                id=\"name\"\n                                label={this.state.dialogType === 'shout' ? \"Shout Body\" : 'Comment Body'}\n                                fullWidth\n                            />\n                    </DialogContent>\n                    <DialogActions>\n                    <Button onClick={this.handleClose} color=\"primary\">\n                        Cancel\n                    </Button>\n                    <Button onClick={this.handleSubmit} color=\"primary\">\n                        Save\n                    </Button>\n                    </DialogActions>\n                </Dialog>\n            </Grid>\n        )\n    }\n}\n\nexport default withStyles(styles)(MyShouts); "]},"metadata":{},"sourceType":"module"}